@* ReSharper disable once CheckNamespace *@
@namespace Comp
@inherits BasePagedComponent<IPartPropertiesViewModel, IProperty>

<RadzenGrid @ref="m_grid" Count="ViewModel!.TotalItems" AllowPaging="true" LoadData="x => LoadData(x.Filter, x)" Data="ViewModel!.Items" PageSize="ViewModel!.PageSize" TItem="Models.Interfaces.Entities.IProperty">
  <Columns>
    <RadzenGridColumn TItem="Models.Interfaces.Entities.IProperty" Property="PropertyName" Title="Name">
      <FooterTemplate>
        Displayed properties: <b>@ViewModel!.Items.Count</b> of <b>@ViewModel!.TotalItems</b>
      </FooterTemplate>
    </RadzenGridColumn>
    <RadzenGridColumn TItem="Models.Interfaces.Entities.IProperty" Title="Value">
      <Template Context="data">
        @data.PropertyValue
        @if (!string.IsNullOrEmpty(data.Unit))
        {
          @data.Unit
        }
      </Template>
    </RadzenGridColumn>
  </Columns>
</RadzenGrid>

@code {
#nullable enable

  private RadzenGrid<IProperty>? m_grid;
  private int m_partId;

  /// <summary>
  /// Parent part id
  /// </summary>
  [Parameter]
  public string PartId
  {
    get => m_partId.ToString();
    set
    {
      if (!int.TryParse(value, out var id))
        return;

      m_partId = id;
      if (ViewModel != null)
        ViewModel.PartId = id;
    }
  }

  /// <inheritdoc />
  protected override void GoToPage(int page)
    => m_grid?.GoToPage(page);

}